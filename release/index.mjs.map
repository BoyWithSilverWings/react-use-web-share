{"version":3,"file":"index.mjs","sources":["../src/share-content.ts","../src/index.ts","../src/get-url.ts"],"sourcesContent":["function shareContent(config: IShareConfig, onSuccess: () => void, onError: () => void) {\n  return function () {\n    navigator\n      .share(config)\n      .then(onSuccess)\n      .catch(onError);\n  };\n}\n\nexport default shareContent;","import { useState, useEffect, useRef } from 'react';\n\nimport shareContent from \"./share-content\";\nimport getUrl from './get-url';\n\n/**\n * Use native web share dialog when available\n * @param args Arguments to be passed to share\n * @param onSuccess function called on successfully sharing content\n * @param onError callback function called on error sharing content\n */\nfunction useWebShare(args: Partial<IShareConfig> = {}, onSuccess = () => { }, onError = () => { }) {\n  const [loading, setLoading] = useState(true);\n  const [isSupported, setSupport] = useState(false);\n  const config = useRef<IShareConfig>({\n    url: '',\n    title: '',\n    text: '',\n  });\n\n  useEffect(\n    () => {\n      const url = getUrl(args.url);\n      const title = args.title || document.title;\n      const text = args.text || undefined;\n      config.current = { title, text, url };\n\n      if (!!navigator.share) {\n        setSupport(true);\n      } else {\n        setSupport(false);\n      }\n      setLoading(false);\n    },\n    [args, onSuccess, onError]\n  );\n\n  return {\n    loading,\n    isSupported,\n    config: config.current,\n    share: shareContent(config.current, onSuccess, onError),\n  };\n}\n\nexport default useWebShare;\n","/**\n * Get the URL to be shared.\n * If the site uses canonical URL, then use that URL otherwise the current URL\n * @param url URL that might be passed on by the user\n */\nfunction getUrl(url?: string) {\n  if(!!url) {\n    return url;\n  } else {\n    const canonicalEl = document.querySelector('link[rel=canonical]') as HTMLLinkElement;\n    return canonicalEl ? canonicalEl.href : window.location.href;\n  }\n}\n\nexport default getUrl;"],"names":["shareContent","config","onSuccess","onError","navigator","share","then","catch","args","useState","useRef","url","title","text","useEffect","canonicalEl","document","querySelector","href","window","location","getUrl","current","undefined","setSupport","setLoading","loading","isSupported"],"mappings":"4DAAA,SAASA,EAAaC,EAAsBC,EAAuBC,UAC1D,WACLC,UACGC,MAAMJ,GACNK,KAAKJ,GACLK,MAAMJ,mBCMb,SAAqBK,EAAkCN,EAAuBC,kBAA3B,oEACnBM,GAAS,mBACLA,GAAS,iBACrCR,EAASS,EAAqB,CAClCC,IAAK,GACLC,MAAO,GACPC,KAAM,YAGRC,iBAEUH,ECjBZ,SAAgBA,MACTA,SACIA,MAEDI,EAAcC,SAASC,cAAc,8BACpCF,EAAcA,EAAYG,KAAOC,OAAOC,SAASF,KDY1CG,CAAOb,EAAKG,KAClBC,EAAQJ,EAAKI,OAASI,SAASJ,MAErCX,EAAOqB,QAAU,OAAEV,OADNJ,EAAKK,WAAQU,MACMZ,GAE1BP,UAAUC,MACdmB,GAAW,GAEXA,GAAW,GAEbC,GAAW,IAEb,CAACjB,EAAMN,EAAWC,IAGb,SACLuB,cACAC,EACA1B,OAAQA,EAAOqB,QACfjB,MAAOL,EAAaC,EAAOqB,QAASpB,EAAWC"}