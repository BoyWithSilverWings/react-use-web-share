{"version":3,"file":"index.mjs","sources":["../src/share-content.ts","../src/get-url.ts","../src/index.ts"],"sourcesContent":["import getUrl from \"./get-url\";\n\n/**\n * Trigger native share popup\n */\nfunction shareContent(onSuccess: () => void, onError: () => void) {\n  return function (config: Partial<IShareConfig>) {\n    console.log(config)\n    const url = getUrl(config.url);\n    const title = config.title || document.title;\n    const text = config.text;\n    console.log({ text, title, url })\n    navigator\n      .share({ text, title, url })\n      .then(onSuccess)\n      .catch(onError);\n  };\n}\n\nexport default shareContent;","/**\n * Get the URL to be shared.\n * If the site uses canonical URL, then use that URL otherwise the current URL\n * @param url URL that might be passed on by the user\n */\nfunction getUrl(url?: string) {\n  if(!!url) {\n    return url;\n  } else {\n    const canonicalEl = document.querySelector('link[rel=canonical]') as HTMLLinkElement;\n    return canonicalEl ? canonicalEl.href : window.location.href;\n  }\n}\n\nexport default getUrl;","import { useState, useEffect } from 'react';\n\nimport shareContent from \"./share-content\";\n\n/**\n * Use native web share dialog when available\n * @param onSuccess function called on successfully sharing content\n * @param onError callback function called on error sharing content\n * @example \n * const { isSupported, isLoading, share } = useWebShare(successFn, errorFn);\n */\nfunction useWebShare(onSuccess = () => { }, onError = () => { }) {\n  const [loading, setLoading] = useState(true);\n  const [isSupported, setSupport] = useState(false);\n\n  useEffect(\n    () => {\n      if (!!navigator.share) {\n        setSupport(true);\n      } else {\n        setSupport(false);\n      }\n      setLoading(false);\n    },\n    [onSuccess, onError]\n  );\n\n  return {\n    loading,\n    isSupported,\n    share: shareContent(onSuccess, onError),\n  };\n}\n\nexport default useWebShare;\n"],"names":["shareContent","onSuccess","onError","config","console","log","url","canonicalEl","document","querySelector","href","window","location","getUrl","title","text","navigator","share","then","catch","useState","useEffect","setSupport","setLoading","loading","isSupported"],"mappings":"gDAKA,SAASA,EAAaC,EAAuBC,UACpC,SAAUC,GACfC,QAAQC,IAAIF,OACNG,ECHV,SAAgBA,MACTA,SACIA,MAEDC,EAAcC,SAASC,cAAc,8BACpCF,EAAcA,EAAYG,KAAOC,OAAOC,SAASF,KDF5CG,CAAOV,EAAOG,KACpBQ,EAAQX,EAAOW,OAASN,SAASM,MACjCC,EAAOZ,EAAOY,KACpBX,QAAQC,IAAI,MAAEU,QAAMD,MAAOR,IAC3BU,UACGC,MAAM,MAAEF,QAAMD,MAAOR,IACrBY,KAAKjB,GACLkB,MAAMjB,mBEJb,SAAqBD,EAAuBC,mEACZkB,GAAS,mBACLA,GAAS,wBAE3CC,aAEUL,UAAUC,MACdK,GAAW,GAEXA,GAAW,GAEbC,GAAW,IAEb,CAACtB,EAAWC,IAGP,SACLsB,cACAC,EACAR,MAAOjB,EAAaC,EAAWC"}